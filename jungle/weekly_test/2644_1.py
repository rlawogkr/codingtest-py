import sys

def input():
    return sys.stdin.readline().rstrip()

n = int(input()) # 전체 사람의 수
a, b = map(int, input().split()) # 촌수를 계산해야 하는 두 사람 번호
m = int(input()) # 서로 다른 두 사람의 관계의 갯수

INF = 1e9
# 두 사람의 친척 관계가 없을 경우 -1
# floyd_warshall
adj_list = [[INF]*(n+1) for _ in range(n+1)]

for _ in range(m):
    st, en = map(int, input().split())
    adj_list[st][en] = 1
    adj_list[en][st] = 1

for i in range(1, n+1):
    adj_list[i][i] = 0

for k in range(1, n+1):
    for i in range(1, n+1):
        for j in range(1, n+1):
            adj_list[i][j] = min(adj_list[i][j], adj_list[i][k] + adj_list[k][j])

if adj_list[a][b] == INF or 0:
    print(-1)
else:
    print(adj_list[a][b])

'''
[1000000000.0, 1000000000.0, 1000000000.0, 1000000000.0, 1000000000.0, 1000000000.0, 1000000000.0, 1000000000.0, 1000000000.0, 1000000000.0], 
[1000000000.0, 0, 1, 1, 1000000000.0, 1000000000.0, 1000000000.0, 2, 2, 2], 
[1000000000.0, 1, 0, 2, 1000000000.0, 1000000000.0, 1000000000.0, 1, 1, 1], 
[1000000000.0, 1, 2, 0, 1000000000.0, 1000000000.0, 1000000000.0, 3, 3, 3], 
[1000000000.0, 1000000000.0, 1000000000.0, 1000000000.0, 0, 1, 1, 1000000000.0, 1000000000.0, 1000000000.0], 
[1000000000.0, 1000000000.0, 1000000000.0, 1000000000.0, 1, 0, 2, 1000000000.0, 1000000000.0, 1000000000.0], 
[1000000000.0, 1000000000.0, 1000000000.0, 1000000000.0, 1, 2, 0, 1000000000.0, 1000000000.0, 1000000000.0], 
[1000000000.0, 2, 1, 3, 1000000000.0, 1000000000.0, 1000000000.0, 0, 2, 2],
[1000000000.0, 2, 1, 3, 1000000000.0, 1000000000.0, 1000000000.0, 2, 0, 2], 
[1000000000.0, 2, 1, 3, 1000000000.0, 1000000000.0, 1000000000.0, 2, 2, 0]

'''